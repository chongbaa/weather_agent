Google Colab 本身没有像传统 Linux 终端那样的独立 Terminal 窗口，它没有内置的图形化终端（像 VS Code 的 Terminal、JupyterLab 的 Terminal，或者本地电脑的 cmd/PowerShell/ bash）。

Colab 用以下方式模拟终端功能：

1. **最常用：用 ! 前缀执行 shell 命令** 这相当于在终端里直接敲命令，Colab 会把它们发送到虚拟机的 bash shell 执行。 示例：

```Python
    !pwd              # 当前目录
    !ls -la           # 列出文件
    !pip install torch
    !git clone https://github.com/xxx
    !nvidia-smi       # 查看 GPU
```

2. **用 % 前缀的 magic 命令**（IPython/Jupyter 专有，更强大） 示例：
```Python
    %cd /content/drive/MyDrive   # 切换目录（注意%cd会真正改变当前工作目录）
    %pwd                         # 同 pwd，但返回字符串
    %ls                          # 同 ls
    %timeit some_function()      # 性能测试
    %who                         # 查看所有变量
```

3. **运行多行 shell 脚本**（用 %%shell 或 %%bash）
  
```Python
    %%bash
    cd /content/drive/MyDrive
    ls -l
    echo "Hello from bash!"
```

或者用 %%shell（支持更多 bash 特性）。
```Python
%%bash
cd /content/drive/MyDrive
ls -l
echo "Hello from bash!"
```
### 为什么 Colab 不提供独立 Terminal？

- Colab 是**浏览器-based 的云笔记本**，设计目标是简单、零配置、适合教学/原型/分享。
- 它运行在**临时虚拟机**上（VM），用户无法直接 SSH 登录或开持久终端（因为 VM 随时销毁）。
- 所有操作都通过 notebook cell 完成，保持“可复现、可分享”的特性。

### 如果你非常想“像终端一样”用？

- **方案1**：用 ! 和 % 就够了（99% 用户都这样）。
- **方案2**：用第三方扩展（如 colab-shell）——但 2026 年官方不支持，容易出问题，不推荐。
- **方案3**：用 **Cloud Shell** 或 **Cloud VM**（Google Cloud 付费）——如果你需要真终端，建议切换到 Google Cloud Shell（免费额度）或 VM 实例。
- **方案4**：用 VS Code + Colab（本地 VS Code 连接 Colab），它有完整终端，但需要设置 SSH 或 ngrok 隧道（有点复杂）。

总结：**Colab 没有图形化 Terminal，但通过 !、%、%%shell 等方式，你可以执行几乎所有终端命令**，体验接近 90% 的终端操作。

在 Colab 里，“终端（Terminal）”和以 `%` 开头的“魔法命令（Magic Commands）”其实是**两套完全不同的执行环境**。很多人第一次用都会混淆，你问得非常到位。

下面用你喜欢的那种**清晰、可扩展的技术解释**来拆开讲👇

## 🧩 1. **Colab 终端（Terminal）是什么？**

**就是一个真正的 Linux Shell。**

- 运行的是 **bash**（或你选择的 shell）
    
- 权限、路径、环境变量都和系统一致
    
- 能执行任何系统级命令： `ls`, `cd`, `apt-get`, `pip`, `git`, `top`, `htop`, `python`, `bash` …
    
- 你可以跑后台服务、启动进程、看系统资源、装系统包
    

**本质：你在操作 Colab 后端的真实机器。**

## 🧩 2. **% 开头的命令是什么？**

这是 **Jupyter/Colab Notebook 的魔法命令（Magic Commands）**。

它们不是 Linux 命令，而是 Notebook 内部的“增强语法”。

常见例子：

|魔法命令|作用|
|---|---|
|`%cd`|改 notebook 的工作目录（不是系统 shell）|
|`%pip install xxx`|在当前 Python 环境安装包|
|`%time`|计时|
|`%env`|设置环境变量|
|`%run script.py`|运行 Python 脚本|

**本质：魔法命令是 Notebook 的“扩展语法”，不是系统命令。**

## 🧩 3. **两者的核心区别总结**

|项目|终端（Terminal）|`%` 魔法命令|
|---|---|---|
|执行环境|真实 Linux Shell|Notebook 内部解释器|
|作用范围|整个系统|Notebook 会话|
|能力|完整系统权限|仅限 Notebook 功能增强|
|典型用途|apt、git、系统操作|Python 环境管理、调试、Notebook 工具|
|语法|Bash|Jupyter Magic|

## 🧩 4. **为什么两者看起来都能执行命令？**

因为 Notebook 里也允许你用 `!` 执行 shell：

```python
!ls
!pip install numpy
```

但注意：

- `!` 是 Notebook 临时开一个 shell 执行一次命令
    
- `%` 是 Notebook 的魔法命令
    
- **终端** 是真正的持续 shell 会话
    

## 🧩 5. **什么时候用哪个？**

### 用终端（Terminal）：

- 你需要持续的 shell 会话
    
- 你要跑后台服务
    
- 你要用系统工具（htop、tmux、git clone 大仓库）
    
- 你要装系统包（apt-get）
    

### 用 `%` 魔法命令：

- Notebook 内部增强功能
    
- 快速安装 Python 包（`%pip`）
    
- 计时、调试、运行脚本
    
- 切换 Notebook 工作目录
    

如果你愿意，我还能给你做一个：

- **可视化流程图**
    
- **最小可运行示例**
    
- **如何在 Colab 中优雅地混用终端 + 魔法命令的最佳实践**
    

你想继续深入哪一块？

%%怎么用

`%%` 在 Colab / Jupyter 里是 **“cell magic（单元魔法命令）”**，它的作用是： **把整个代码单元交给某个特殊解释器处理，而不是逐行执行 Python。**

你之前问 `%`，那是 **行魔法（line magic）**； 而 `%%` 是 **单元魔法（cell magic）**，作用范围更大。

下面给你一个**极简、可运行、可扩展**的解释，完全符合你喜欢的风格。

# 🎯 1. `%%` 的核心用途

**把整个 cell 的内容交给某个“魔法解释器”执行。**

例如：

- `%%bash` → 整个 cell 当成 bash 脚本执行
    
- `%%time` → 给整个 cell 计时
    
- `%%writefile` → 把整个 cell 写入文件
    
- `%%html` → 把 cell 内容当 HTML 渲染
    
- `%%javascript` → 执行 JS
    
- `%%capture` → 捕获输出
    

# 🧪 2. 最小可运行示例（你可以直接复制到 Colab）

### **示例 1：运行 bash 脚本**

```python
%%bash
echo "Hello from bash"
ls -l
```

### **示例 2：写入文件**
```python
%%writefile hello.py
print("Hello from Python file")
```

### **示例 3：计时整个 cell**
```python
%%time
sum = 0
for i in range(10_000_000):
    sum += i
sum
```

### **示例 4：捕获输出**
```python
%%capture output
print("This will not show")

output.show()
```

# 🧩 3. `%%` 和 `%` 的区别（你会喜欢这个表）

|类型|写法|作用范围|示例|
|---|---|---|---|
|行魔法|`%xxx`|只作用于这一行|`%time x = f()`|
|单元魔法|`%%xxx`|作用于整个 cell|`%%bash`、`%%writefile`|

# 🧠 4. 什么时候用 `%%`？

当你需要：

- 整个 cell 都是 bash / HTML / JS / LaTeX
    
- 整个 cell 都要计时
    
- 整个 cell 要写入文件
    
- 整个 cell 的输出要捕获
    

如果只是单行命令，用 `%` 更轻便。